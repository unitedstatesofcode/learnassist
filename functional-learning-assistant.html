<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnAssist - AI-Powered Learning Resources Generator</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #f97316;
            --gray-light: #f3f4f6;
            --gray: #e5e7eb;
            --gray-dark: #6b7280;
            --white: #ffffff;
            --black: #111827;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--black);
            background-color: var(--gray-light);
        }
        
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 2rem;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo-icon {
            color: var(--secondary);
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--gray-dark);
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 1rem;
            background-color: var(--white);
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--black);
        }
        
        .hero p {
            font-size: 1.2rem;
            color: var(--gray-dark);
            max-width: 800px;
            margin: 0 auto 2rem;
        }
        
        .api-key-container {
            background-color: var(--white);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .input-container {
            background-color: var(--white);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--black);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray);
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
        }
        
        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="password"],
        input[type="file"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--gray);
            border-radius: 0.5rem;
            font-size: 1rem;
        }
        
        input[type="text"]:focus,
        input[type="password"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }
        
        .file-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .file-input-wrapper input[type="file"] {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-input-button {
            display: inline-block;
            width: 100%;
            padding: 0.75rem;
            background-color: var(--white);
            border: 1px dashed var(--gray-dark);
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s, background-color 0.3s;
        }
        
        .file-input-button:hover {
            border-color: var(--primary);
            background-color: rgba(79, 70, 229, 0.05);
        }
        
        button {
            background-color: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--primary-dark);
        }

        button:disabled {
            background-color: var(--gray);
            cursor: not-allowed;
        }
        
        .result-container {
            display: none;
            background-color: var(--white);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .result-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray);
        }
        
        .result-tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
        }
        
        .result-tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .result-content {
            display: none;
        }
        
        .result-content.active {
            display: block;
        }
        
        .summary {
            margin-bottom: 2rem;
            line-height: 1.8;
        }
        
        .quiz-container {
            margin-bottom: 2rem;
        }
        
        .quiz-question {
            margin-bottom: 1.5rem;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 0.75rem;
        }
        
        .quiz-options {
            display: grid;
            gap: 0.5rem;
        }
        
        .quiz-option {
            padding: 0.75rem;
            border: 1px solid var(--gray);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        .quiz-option:hover {
            background-color: rgba(79, 70, 229, 0.05);
            border-color: var(--primary);
        }
        
        .quiz-option.selected {
            background-color: rgba(79, 70, 229, 0.1);
            border-color: var(--primary);
        }
        
        .quiz-result {
            margin-top: 1.5rem;
            font-weight: 500;
            display: none;
        }
        
        .resource-options {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .resource-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--white);
            color: var(--primary);
            border: 1px solid var(--primary);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .resource-button:hover {
            background-color: var(--primary);
            color: var(--white);
        }
        
        .loader {
            display: none;
            text-align: center;
            margin: 2rem 0;
        }
        
        .loader-spinner {
            border: 4px solid var(--gray);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        footer {
            background-color: var(--white);
            padding: 2rem;
            text-align: center;
            color: var(--gray-dark);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            margin-top: 4rem;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .feature-card {
            background-color: var(--white);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .feature-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .feature-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .info-text {
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--gray-dark);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 0.5rem;
            cursor: pointer;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: var(--black);
            color: var(--white);
            text-align: center;
            border-radius: 0.5rem;
            padding: 0.75rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
            font-weight: normal;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--black) transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .error-message {
            color: #dc2626;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            display: none;
        }
        
        /* Media Queries */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .tabs, .result-tabs {
                flex-wrap: wrap;
            }
            
            .tab, .result-tab {
                flex: 1 0 50%;
                text-align: center;
            }

            .resource-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <span class="logo-icon">📚</span>
                <span>LearnAssist</span>
            </div>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#how-it-works">How It Works</a>
                <a href="#about">About</a>
            </div>
        </nav>
    </header>
    
    <main>
        <section class="hero">
            <h1>Transform Learning Content into Interactive Resources</h1>
            <p>AI-powered tool to analyze educational videos and documents. Get summaries and quizzes instantly to enhance your learning experience.</p>
        </section>

        <section class="api-key-container">
            <h2>OpenAI API Key 
                <span class="tooltip">ℹ️
                    <span class="tooltiptext">Your API key is stored locally and never sent to our servers. It's used to communicate directly with OpenAI from your browser.</span>
                </span>
            </h2>
            <div class="form-group">
                <label for="api-key">Enter your OpenAI API Key</label>
                <input type="password" id="api-key" placeholder="sk-...">
                <p class="info-text">You need an OpenAI API key to use this service. Get one at <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a></p>
            </div>
        </section>
        
        <section class="input-container">
            <h2>Generate Learning Resources</h2>
            <div class="tabs">
                <div class="tab active" onclick="switchTab('youtube')">YouTube Video</div>
                <div class="tab" onclick="switchTab('pdf')">PDF Document</div>
            </div>
            
            <div id="youtube-tab" class="tab-content active">
                <div class="form-group">
                    <label for="youtube-url">Enter YouTube Video URL</label>
                    <input type="text" id="youtube-url" placeholder="https://www.youtube.com/watch?v=...">
                    <div id="youtube-error" class="error-message"></div>
                </div>
                <button id="youtube-button" onclick="processYouTube()">Generate Resources</button>
            </div>
            
            <div id="pdf-tab" class="tab-content">
                <div class="form-group">
                    <label for="pdf-file">Upload PDF Document</label>
                    <div class="file-input-wrapper">
                        <div class="file-input-button">
                            <span id="file-name">Choose a PDF file or drag and drop here</span>
                        </div>
                        <input type="file" id="pdf-file" accept=".pdf" onchange="updateFileName()">
                    </div>
                    <div id="pdf-error" class="error-message"></div>
                </div>
                <button id="pdf-button" onclick="processPDF()">Generate Resources</button>
            </div>
        </section>
        
        <div class="loader" id="loader">
            <div class="loader-spinner"></div>
            <p>Analyzing content and generating resources...</p>
            <p>This may take a few minutes depending on the content length</p>
        </div>
        
        <section class="result-container" id="result-container">
            <h2>Learning Resources</h2>
            <div class="result-tabs">
                <div class="result-tab active" onclick="switchResultTab('summary')">Summary</div>
                <div class="result-tab" onclick="switchResultTab('quiz')">Quiz</div>
            </div>
            
            <div id="summary-tab" class="result-content active">
                <div class="summary" id="summary-content">
                    <!-- Summary content will be loaded here -->
                </div>
                <div class="resource-options">
                    <button class="resource-button" onclick="downloadSummary()">
                        <span>📥</span> Download Summary
                    </button>
                    <button class="resource-button" onclick="copyToClipboard('summary-content')">
                        <span>📋</span> Copy to Clipboard
                    </button>
                </div>
            </div>
            
            <div id="quiz-tab" class="result-content">
                <div class="quiz-container" id="quiz-container">
                    <!-- Quiz content will be loaded here -->
                </div>
                <button onclick="checkQuiz()">Submit Answers</button>
                <div class="quiz-result" id="quiz-result"></div>
                <div class="resource-options">
                    <button class="resource-button" onclick="downloadQuiz()">
                        <span>📥</span> Download Quiz
                    </button>
                    <button class="resource-button" onclick="resetQuiz()">
                        <span>🔄</span> Reset Quiz
                    </button>
                </div>
            </div>
        </section>
        
        <section class="features" id="features">
            <div class="feature-card">
                <div class="feature-icon">🎥</div>
                <div class="feature-title">YouTube Video Analysis</div>
                <p>Extract valuable information from educational videos without watching the entire content.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">📄</div>
                <div class="feature-title">PDF Document Processing</div>
                <p>Convert dense text documents into digestible summaries and interactive quizzes.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🤖</div>
                <div class="feature-title">AI-Powered Analysis</div>
                <p>OpenAI's advanced AI extracts key concepts and generates meaningful questions for better learning.</p>
            </div>
        </section>
        
        <section id="how-it-works">
            <h2>How It Works</h2>
            <ol style="margin-left: 2rem; margin-bottom: 2rem;">
                <li>Input your OpenAI API key for secure, direct communication with AI</li>
                <li>Enter a YouTube video URL or upload a PDF document</li>
                <li>The system extracts and analyzes the content using AI</li>
                <li>A comprehensive summary is generated highlighting key concepts</li>
                <li>Multiple-choice quiz questions are created to test your understanding</li>
                <li>Download or copy the resources for your study sessions</li>
            </ol>
            <p><strong>Note:</strong> Your API key is used directly from your browser to OpenAI's services. We never store or access your API key on our servers.</p>
        </section>

        <section id="about">
            <h2>About LearnAssist</h2>
            <p style="margin-bottom: 2rem;">
                LearnAssist was created to make educational content more accessible and engaging. By leveraging AI technology, we help students, educators, and lifelong learners extract the most value from videos and documents with minimal effort. Our tool is perfect for:
            </p>
            <ul style="margin-left: 2rem; margin-bottom: 2rem;">
                <li>Students preparing for exams</li>
                <li>Teachers creating quick lesson materials</li>
                <li>Professionals staying updated in their field</li>
                <li>Anyone looking to learn more efficiently</li>
            </ul>
        </section>
    </main>
    
    <footer>
        <p>LearnAssist - AI-Powered Learning Resources Generator</p>
        <p>Created with ❤️ for learners everywhere</p>
    </footer>
    
    <script>
        // Initialize variables
        let apiKey = '';
        let quizData = [];
        let summaryData = '';
        let correctAnswers = [];

        // Check for stored API key on page load
        document.addEventListener('DOMContentLoaded', function() {
            const storedApiKey = localStorage.getItem('openai_api_key');
            if (storedApiKey) {
                document.getElementById('api-key').value = storedApiKey;
                apiKey = storedApiKey;
            }

            // Setup event listeners
            document.getElementById('api-key').addEventListener('change', function() {
                apiKey = this.value.trim();
                localStorage.setItem('openai_api_key', apiKey);
            });

            // Enable drag and drop for PDF upload
            setupDragAndDrop();
        });

        // Tab switching functionality
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        function switchResultTab(tabName) {
            document.querySelectorAll('.result-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.result-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`.result-tab[onclick="switchResultTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        // File input handling
        function updateFileName() {
            const fileInput = document.getElementById('pdf-file');
            const fileName = document.getElementById('file-name');
            
            if (fileInput.files.length > 0) {
                fileName.textContent = fileInput.files[0].name;
            } else {
                fileName.textContent = 'Choose a PDF file or drag and drop here';
            }
        }

        // Setup drag and drop
        function setupDragAndDrop() {
            const dropArea = document.querySelector('.file-input-button');
            const fileInput = document.getElementById('pdf-file');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropArea.style.borderColor = '#4f46e5';
                dropArea.style.backgroundColor = 'rgba(79, 70, 229, 0.05)';
            }
            
            function unhighlight() {
                dropArea.style.borderColor = '#6b7280';
                dropArea.style.backgroundColor = '#ffffff';
            }
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                fileInput.files = files;
                updateFileName();
            }
        }
        
        // Validate API key
        function validateApiKey() {
            apiKey = document.getElementById('api-key').value.trim();
            
            if (!apiKey) {
                alert('Please enter your OpenAI API key to continue.');
                return false;
            }
            
            if (!apiKey.startsWith('sk-')) {
                alert('Please enter a valid OpenAI API key. It should start with "sk-".');
                return false;
            }
            
            // Store API key in local storage
            localStorage.setItem('openai_api_key', apiKey);
            return true;
        }
        
        // Process YouTube video
        async function processYouTube() {
            if (!validateApiKey()) return;
            
            const youtubeUrl = document.getElementById('youtube-url').value.trim();
            const errorElement = document.getElementById('youtube-error');
            
            if (!youtubeUrl) {
                errorElement.textContent = 'Please enter a YouTube URL';
                errorElement.style.display = 'block';
                return;
            }
            
            if (!isValidYouTubeUrl(youtubeUrl)) {
                errorElement.textContent = 'Please enter a valid YouTube URL';
                errorElement.style.display = 'block';
                return;
            }
            
            errorElement.style.display = 'none';
            showLoader();
            
            try {
                // Extract video ID
                const videoId = extractYouTubeVideoId(youtubeUrl);
                
                // Get transcript using YouTube API or a transcript service
                const transcript = await getYouTubeTranscript(videoId);
                
                // Process transcript with AI
                const results = await processWithAI(transcript, 'video', youtubeUrl);
                
                // Display results
                displayResults(results);
            } catch (error) {
                hideLoader();
                alert(`Error: ${error.message}`);
            }
        }
        
        // Process PDF document
        async function processPDF() {
            if (!validateApiKey()) return;
            
            const fileInput = document.getElementById('pdf-file');
            const errorElement = document.getElementById('pdf-error');
            
            if (fileInput.files.length === 0) {
                errorElement.textContent = 'Please select a PDF file';
                errorElement.style.display = 'block';
                return;
            }
            
            const file = fileInput.files[0];
            if (file.type !== 'application/pdf') {
                errorElement.textContent = 'Please select a valid PDF file';
                errorElement.style.display = 'block';
                return;
            }
            
            errorElement.style.display = 'none';
            showLoader();
            
            try {
                // Extract text from PDF
                const pdfText = await extractTextFromPDF(file);
                
                // Process text with AI
                const results = await processWithAI(pdfText, 'pdf', file.name);
                
                // Display results
                displayResults(results);
            } catch (error) {
                hideLoader();
                alert(`Error: ${error.message}`);
            }
        }

        // Extract YouTube Video ID
        function extractYouTubeVideoId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }

        // Get YouTube Transcript
        async function getYouTubeTranscript(videoId) {
            // In a real implementation, you would use a YouTube transcript API
            // For this simplified version, we'll use a mock approach
            
            // First try to get video details to check if it exists
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/videos?id=${videoId}&part=snippet&key=AIzaSyAa8yy0GdcGPHdtD083HiGGx_S0vMPScDM`);
                const data = await response.json();
                
                if (!data.items || data.items.length === 0) {
                    throw new Error('Video not found or is unavailable');
                }
                
                const videoTitle = data.items[0].snippet.title;
                
                // For demonstration purposes, we'll return some basic info
                // In a real implementation, you would fetch the actual transcript
                return `Video Title: ${videoTitle}\n\nThis is a placeholder for the transcript of YouTube video ID: ${videoId}. In a real implementation, this would contain the actual transcript text extracted from the video using a transcript API or service. For demonstration purposes, we're proceeding with this placeholder text to show the AI processing capabilities.`;
            } catch (error) {
                throw new Error('Failed to get video information. Please check the URL and try again.');
            }
        }

        // Extract text from PDF
        async function extractTextFromPDF(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                
                reader.onload = async function(event) {
                    try {
                        // In a real implementation, you would use a PDF parsing library
                        // For now, we'll simulate with a placeholder
                        resolve(`This is a placeholder for the text extracted from the PDF file: ${file.name}. In a real implementation, this would contain the actual text content extracted from the PDF using a library like pdf.js. For demonstration purposes, we're proceeding with this placeholder text to show the AI processing capabilities.`);
                    } catch (error) {
                        reject(new Error('Failed to extract text from PDF'));
                    }
                };
                
                reader.onerror = function() {
                    reject(new Error('Failed to read the PDF file'));
                };
                
                reader.readAsArrayBuffer(file);
            });
        }

        // Process content with AI
        async function processWithAI(content, type, source) {
            try {
                // Create prompt for summary
                const summaryPrompt = `You are an educational content analyzer. Your task is to create a detailed, well-structured summary of the